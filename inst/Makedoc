% make --makefile=Makedoc

RM = rm -f
version = Rscript -e "as.list(read.dcf('DESCRIPTION')[1, ])\$Version"

all:	build movetodoc

movetovignettes:
	rm -r -f ../inst/doc/
	rm -d -f ../inst/doc/
	mkdir ../inst/doc/
	cp -a ../inst/userguide/doc/. ../inst/doc/
	cp -a ../inst/derivations/doc/. ../inst/doc/
	cp ../inst/derivations/*.Rnw ../vignettes/
	cp ../inst/userguide/userguide.Rnw ../vignettes/

build:
  cd ~/Documents/GitHub
  rm MARSS_$(version).tar.gz
  R CMD build MARSS
  rm -r ~/Dropbox/MARSS
  rm ~/Dropbox/MARSS_$(version).tar.gz
  cp MARSS_$(version).tar.gz ~/Dropbox/MARSS_$(version).tar.gz
  cd ~/Dropbox
  tar -xvzf MARSS_$(version).tar.gz
  cd ~/Documents/GitHub/MARSS/inst
  make --makefile=Makedoc
  cd ~/Documents/GitHub
  R CMD build --no-build-vignettes MARSS


movetodoc:
	rm -r -f ../inst/doc/
	rm -d -f ../inst/doc/
	mkdir ../inst/doc/
	cp -a ../inst/userguide/doc/. ../inst/doc/
	cp -a ../inst/derivations/doc/. ../inst/doc/
	cp ../inst/userguide/UserGuide.Rnw ../inst/doc/UserGuide.Rnw
	cp ../inst/userguide/UserGuide.Rnw ../vignettes/UserGuide.Rnw
	cp ../inst/derivations/*.Rnw ../vignettes/
